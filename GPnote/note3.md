# 20180311

오늘은 캘랜더에서 뜨는 modal의 그래프에 시간만 표시하는대신 시:분:초 형식으로 표시가 되도록 프론트엔드와 백엔드 부분을 수정하였다.<br>

그리고 교수님께서 피드백 주신 것처럼 cm 로 표시하는 대신 %로 값을 변환하여 표시해주었다. 이 때 나누고 곱하다 보니 값이 소수점으로<br>

나와 지저분해져 소수점을 반올림해주는 Math.round(value) 를 사용하였다.<br>

```
Math.round(value);
```
# 20180314

이전까지 고민해왔던 사항들<br>

1. grove ultrasonic ranger 가 센서값을 잘 읽어오는 것을 확인, 쉴드가 필요하지만 비쌈 그리하여 아두이노와 라파를 이용해서<br>
값을 구하는 방식을 이용, 그러나 SerialException 과 같은 오류 직면. 이를 해결하기 위해 구글링 및 코딩을 함(현재 진행중)<br>

2. 원래는 시간 단위로 표시해주려고 하였지만 시간내에 12:59:59 과 같은 시간에 꽉 차게 되면 서버에 전송해줄 필요가 있음.<br>
이를 위해 모달에서 시,분,초를 표시할 수 있도록 바꿔줌<br>

3. 원래는 contents 부분에 좌표 및 값을 직접적으로 대입하여 표시해주었지만 이는 디바이스가 여러개로 늘어나게 되는 경우 홈페이지를<br>
읽어들이는 시간이 길어지게 되고 깔끔하게 코딩한 것이 아니므로 백엔드가 정보를 전달해주어 표시하는 식으로 수정<br>

4. 라파가 서버의 DB에 바로 접근하게 하여 data를 insert 하는게 기존 계획이었지만 보안적으로 취약하다는 생각이 들어<br>
URL에 정보를 담아 get Request로 라우터가 받게 하여 이를 서버에 update query 하는 방법을 생각함(현재 진행중)<br>

개발 방식 고찰 :<br>

청소부들과 일반사람들 모두에게 도움이 될 수 있는 방향으로 측정방법을 고민해보았다.<br>

처음에는 1시간마다 서버로 보내주는 것을 생각하였지만 이는 매우 심플한 로직인 거 같아<br>

1시간마다 보내주는 방법보다 시간을 더 세분화하여 보내주는 방법이 좋을 것 같았다.<br>

그리하여 10분마다 매초 쓰레기통을 센싱한 값을 평균내었을 때 값이 임계점을 넘으면 바로 서버로 보내질 수 있도록 하였다.<br>

그리고 1시간마다 각 10분 * 6 을 평균낸 값을 서버로 전송하여 사용자가 하루동안의 쓰레기통 상태를 모니터링 할 수 있도록 하였다.<br>

그런데 1시간마다 각 10분마다의 값을 평균낸 값이 과연 의미가 있을 까라는 생각이 들었다.<br>

쓰레기통의 상태를 아는 것은 중요하지만, 한 시간마다 보낼 때 각 10분의 값을 평균을 낸 것이 크게 의미가 있는 것일지는 의문이 들었다.<br>

10분마다 보내는 것을 추가한건 쓰레기통이 꽉 찼을 때의 즉각적인 확인이 필요해서였다. 그리고 그 간격이 10분인 것도<br>

5분, 10분, 20분..등에서 관리자가 쓰레기통을 비우러갔을 때 그 간격으로 인한 것이 쓰레기통 사용에 크게 무리가 없고,<br>

안정적이고 적절한 값이 생각하여 10분을 선택한 것이었다. 10분이 괜찮은지 20분정도로 더 천천히 해도 괜찮은지 아니면<br>

5분으로 촘촘히 체크를 해야 하는지는 실험을 해보며 탄력적으로 선정을 할 예정이다.<br>

1시간마다 보내는 것은<br>

10분마다 체크를 하며 꽉 차면 즉각적으로 서버로 보내주고<br>

그렇지 않은 경우에는 한 시간이 지났을 때 10분마다 체크한 값을 서버로 보내주는 것이 좋을 거 같다.<br>

그렇게 하였을 때는 모달로 표시하였을 때 라벨이 넘쳐 깔끔하게 보이지 않는 에로사항이 있다.<br>

이를 어떻게 하면 잘 해결할 지가 고민이 된다.<br>

굳이 모달을 뜨게 할 필요가 없을지 아니면 다른 Ui 적인 것을 추가하여 효과적으로 보이게 할 수 있을지가 고민된다.<br>

그리고 기존에는 cm 에 대한 값을 % 로 여과 없이 보여주었다 예를 들면 59 56 55 54..등등<br>

이러한 방법이 과연 최선일지에 대한 의문이 들었다. 관리자가 쓰레기통을 관리할 때 일의자리 값의 변동은 의미가 없지 않을까?<br>

다른 방법으로 원래는 100단계로 표시하였다면 55 59 56 54 등은 단순히 50으로 표시하는 것을 추가적으로 생각해보았다.<br>

이 또한 실험을 통하여 탄력적으로 추진할 예정이나 후자의 방안이 더 설득력이 있어보인다.<br>

# 20183015

SerialException 을 결국 핸들링 하지 못했다.<br>

SerialException의 경우 Serial Monitor에서 세자리씩 뜨는 것은 문제가 없으나 두자리, 한자리씩 뜰 때는 SerialException이 자주 발생하였고<br>

인터넷에서 찾아본 방법들 모두 써보았으나 마지막으로 시도한 방법이 라파 부팅을 멈추게 하였다. 이 후 포맷을 하고<br>

교수님과 상의 후 그루브 파이 플러스 쉴드를 사서 쓰기로 하였다.<br>
